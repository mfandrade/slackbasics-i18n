<!-- $Id: installation.xml,v 1.8 2005/04/21 17:33:16 daniel Exp $ -->

<chapter> <?dbhtml filename="installation.html" ?>
<title>Installing &Distribution;</title>

<sect1>
<title>Booting the installation CD-ROM</title>

<para>
The easiest method for booting the installation system is by using the
installation CD-ROM. The &Distribution; installation CD-ROM is a bootable CD,
which means that the BIOS can boot the CD, just like it can boot, for
example, a floppy disk. Most modern systems have a BIOS which supports
CD-ROM booting.
</para>

<para>
If the CD is booted when you have the CD inserted in the CD-ROM drive
during the system boot, the boot sequence is probably not correctly
configured in the BIOS. Enter the BIOS setup (usually by this can be
done by holding the &lt;Del&gt; or &lt;Esc&gt; key when the BIOS screen appears)
and make sure the CD-ROM is on the top of the list in the boot sequence.
If you are using a SCSI CD-ROM you may have to set the boot sequence
in the SCSI BIOS instead of the system BIOS. Consult the SCSI card manual
for more information. 
</para> 

<para>
When the CD-ROM is booted, a pre-boot screen will appear. Normally
you can just press &lt;ENTER&gt; to proceed loading the default 
(<filename>bare.i</filename>) Linux kernel. If want to install Slackware
Linux to a disk that is attached to a SCSI or SATA controller, you
have to boot an alternative kernel. You can boot an alternative kernel
by entering the kernel name on the prompt, and pressing &lt;ENTER&gt;.
The following table lists some of the alternative kernels, for a full
list of kernels, refer to the <filename>Slackware-HOWTO</filename>
file on the CD-ROM.
</para>

<table>
  <title>Alternative kernels</title>

  <tgroup cols="2">
    <thead>
      <row>
        <entry>Kernel</entry><entry>Description</entry>
      </row>
    </thead>
    <tbody>
      <row>
        <entry>adaptec.s</entry>
	<entry>
	  This kernel provides support for most Adaptec SCSI controllers,
	  including VLB and EISA models aside from the more modern PCI
	  controllers.
	</entry>
      </row>
      <row>
        <entry>bareacpi.i</entry>
	<entry>
	  This kernel is similar to the <emphasis>bare.i</emphasis>
	  kernel, but provides support for the Advanced Configuration
	  and Power Interface (ACPI).
	</entry>
      </row>
      <row>
        <entry>ataraid.i</entry>
	<entry>
	  This kernel provides support for some commonly used ATA
	  RAID controllers.
	</entry>
      </row>
      <row>
        <entry>sata.i</entry>
	<entry>
          This kernel is similar to the <emphasis>bare.i</emphasis>
          kernel, but provides support for commonly used SATA controllers.
        </entry>
      </row>
      <row>
        <entry>scsi.s/scsi2.s/scsi3.s</entry>
	<entry>
	  These kernels provide support for various SCSI controllers.
	  Refer to the <filename>Slackware-HOWTO</filename> on the
	  CD-ROM for a list of controllers supported by each kernel.
	</entry>
      </row>

    </tbody>
  </tgroup>
</table>

<para>
After booting the installation system, you will be asked whether you
are using a special (national) keyboard layout or not. If you have 
a normal US/International keyboard, which are the most common, you can
just press &lt;Enter&gt; at this question. After that the login prompt will
appear. Log on as <quote>root</quote>, no password will be requested. 
After logging on the shell is started, and you can start installing
&Distribution;. The installation procedure will be explained briefly in 
this chapter.
</para>
</sect1>

<sect1>
<title>Partitioning a hard disk</title>

<para>
Installing &Distribution; requires at least one &Kernel; partition, creating
a swap partition is also recommended. To be able to create a partition there
has to be free unpartitioned space on the disk. There are some programs
that can resize partitions. For example, FIPS can resize FAT partitions.
Commercial programs like Partition Magic can also resize other partition
types.
</para>

<para>
After booting the &Distribution; CD-ROM and logging on, there are two
partitioning programs at your disposal: <command>fdisk</command> and
<command>cfdisk</command>. <command>cfdisk</command> is the easiest of
both, because it is controlled by a menu interface. This section
describes the <command>cfdisk</command> program.
</para>

<para>
To partition the first harddisk you can simply execute
<command>cfdisk</command>. If you want to partition another disk or
a SCSI disk you have to specify which disk you want to partition
(<command>cfdisk /dev/device</command>). An ATA hard disks have the following
device naming: <filename>/dev/hdn</filename>, <quote>n</quote> is replaced
by a character. E.g. the <quote>primary master</quote> is named
<filename>/dev/hda</filename>, the <quote>secondary slave</quote> is
named <filename>/dev/hdd</filename>. SCSI disks are named in the following
way: <filename>/dev/sdn</filename>, <quote>n</quote> is replaced by
the device character (the first SCSI disk = a, the fourth SCSI disk = d). 
</para>

<figure id="cfdisk">
<title>The cfdisk parition tool</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/cfdisk.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After starting <command>cfdisk</command> currently existing partitions are
shown, as well as the amount of free space. The list of partitions can be
navigated with the <quote>up</quote> and <quote>down</quote> arrow keys.
At the bottom of the screen some commands are displayed, which can be
browsed with the <quote>left</quote> and <quote>right</quote> arrow keys.
A command can be executed with the &lt;Enter&gt; key. 
</para>

<para>
You can create a &Kernel; partition by selecting <quote>Free Space</quote>
and executing the <quote>New</quote> command. <command>cfdisk</command>
will ask you whether you want to create a primary or logical partition.
The number of primary partitions is limited to four. &Kernel; can be installed
on both primary and logical partitions. If you want to install other
operating systems besides &Distribution; that require primary partitions,
it is a good idea to install &Distribution; onto a logical partition.
The type of the new partition is automatically set to <quote>&Kernel;
Native</quote>, so it is not necessary to set the partition type.
</para>

<para>
The creation of a swap partition involves the same steps as a normal
&Kernel; partition, but the type of the partition has to be changed to
<quote>&Kernel; Swap</quote> after the partition is created. The suggested
size of the swap partition depends on your own needs. The swap partition
is used to store programs if the main (RAM) memory is full. If you have
a harddisk of a reasonable size, it is a good idea to make a 256MB or
512MB swap partition, which should be enough for normal usage.
After creating the partition the partition type can be changed to
<quote>&Kernel; Swap</quote>, by selecting the <quote>Type</quote>
command. The <command>cfdisk</command> program will ask for the type
number, <quote>&Kernel; Swap</quote> partitions have type number 82.
Normally number 82 is already selected, so you can go ahead by pressing
the &lt;Enter&gt; key.
</para> 

<para>
If you are satisfied with the partitioning you can save the changes by
executing the <quote>Write</quote> command. This operation has to be
confirmed by entering <command>yes</command>. After saving the changes
you can quite <command>cfdisk</command> with the <command>Quit</command>
command. It is a good idea to reboot the computer before starting the
installation, to make sure that the partitioning changes are active.
Press &lt;ctrl&gt; + &lt;alt&gt; + &lt;del&gt; to shut &Kernel; down and
restart the computer.
</para>
</sect1>

<sect1>
<title>Installing &Distribution;</title>

<para>
The &Distribution; installer is started by executing <command>setup</command>
in the installation disk shell. Setup will show a menu with several choices,
you can see a screenshot of the installer in <xref linkend="setup"/>. Every
option has to be completed to do a complete &Distribution; installation, but once
you start the <command>setup</command> guide will guide you through the
options.
</para>

<figure id="setup">
<title>The setup tool</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/setup.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The first part of the installation is named <quote>ADDSWAP</quote>. The
<command>setup</command> tool will look for a partition with the
<quote>&Kernel; Swap</quote> type, and ask you if you want to format
and activate the swap partition (see figure <xref linkend="addswap"/>).
Normally you can just answer <quote>Yes</quote>.
</para>

<figure id="addswap">
<title>Setting up the swap partition</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/addswap.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After setting the swap up space the <quote>TARGET</quote> menu is
launched, which you can see in <xref linkend="partselect"/>. It is used to 
initialize the &Distribution; partitions. Setup
will display all partitions with the <quote>&Kernel; native</quote> type.
</para>

<figure id="partselect">
<title>Selecting a partition to initialize</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/partselect.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After selecting one partition, the setup tool will ask whether you
want to format a partition or not, and if you want to format it,
whether you want to check the disk for bad sectors or not (<xref
linkend="fscheck"/>). Checking the disk can take a lot of time.
</para>

<figure id="fscheck">
<title>Formatting the partition</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/fscheck.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After selecting whether you want to filesystem or not, you can specify which 
filesystem should be used (<xref linkend="filesystem"/>). Normally you can 
choose the ext2, ext3 and reiserfs filesystems. Ext2 was the standard &Kernel; 
filesystem for many years, the disadvantage is that Ext2 does not support 
journaling. A journal is a special file or area of a partition in which all
filesystem operations are logged. When the system crashes the filesystem
can be repaired rapidly, because the kernel can use the log to see
what disk operations were performed. Ext3 is the same filesystem as
Ext2, but adds journaling. Reiserfs is a newer filesystem, that also provides
journaling. Besides that Reiserfs uses balanced trees, which make many
filesystem operations, especially when you are working with many small
files, faster than with Ext2 or Ext3. A disadvantage is that Reiserfs is
newer, that is why it can be a bit more unstable.
</para>

<figure id="filesystem">
<title>Selecting a filesystem type</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/filesystem.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The first initialized partition is automatically mounted as the root (/)
partition. For other partitions the mount point can be selected after
the initialization. You could, for example make separate partitions for
<filename>/</filename>, <filename>/var</filename>, <filename>/tmp</filename>,
<filename>/home</filename> and <filename>/usr</filename>. This provides
extra protection against crashes. For example the, <filename>/</filename> 
partition is barely changed after the installation if you create these
partitions. So, on the occasion of a crash, the chance that the
<filename>/</filename> partition was in the middle of a write operation
is much smaller.
</para>

<para>
The next step is to select the source medium (<xref linkend="medium"/>). This 
dialog offers several choices, like installing &Distribution; from a CD-ROM or 
installing &Distribution; via NFS. Most of the times &Distribution; is installed from
CD-ROM, so this is what we are going to look at. After selecting
<quote>CD-ROM</quote> you will be asked whether you want to let
setup look for the CD-ROM itself (<quote>Auto</quote>) or you want
to select the CD-ROM device yourself (<quote>Manual</quote>). If you 
select <quote>Manual</quote> the setup tool will show a list of
devices. Select the device holding the &Distribution; CD-ROM.
</para> 

<figure id="medium">
<title>Selecting the source medium</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/medium.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After choosing an installation source the setup tool will ask you which
disk sets (series) you want to install packages from 
(<xref linkend="disksets"/>). A short description of each disk set is
listed.
</para>

<figure id="disksets">
<title>Selecting the disk sets</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/disksets.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
Now it is almost time to start the real installation. The next screen
asks how you would like to install. The most obvious choices are
<quote>full</quote>, <quote>menu</quote> or <quote>expert</quote>.
Selecting <quote>full</quote> will install all packages in the
selected disk sets. This is the easiest way of installing &Distribution;.
The disadvantage of this choice is that it can take quite much disk
space. The <quote>menu</quote> option will ask you for each disk set
which packages you want to install. The <quote>expert</quote> option
is almost equal to the <quote>menu</quote> option, but allows you
to deselect some very important packages from the <quote>a</quote>
disk set.
</para>

<para>
After the completion of the installation the setup tool will allow you to
configure some parts of the system. The first dialog will ask you where
you would like to install the kernel from (see 
<xref linkend="installkernel" />). Normally it is a good idea to install
the kernel from the &Distribution; CD-ROM, this will select the kernel you
installed &Distribution; with. You can confirm this, or select another kernel.
</para>

<figure id="installkernel">
<title>Installing the kernel</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/kernel.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
At this point you can choose to make a bootdisk (<xref linkend="bootdisk" />).
It is a good idea to make a bootdisk, you can use it to boot &Distribution; if
the LILO configuration is botched.
</para>

<figure id="bootdisk">
<title>Creating a bootdisk</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/bootdisk.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The following dialog can be used to make a link, 
<filename>/dev/modem</filename>, that points to your modem device. If
you do not have a modem you can select <emphasis>no modem</emphasis>.
</para>

<figure id="modem">
<title>Selecting the default modem</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/modem.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The next step is to select whether you would like to use hotplug.
Hotplug is used for automatically configuring pluggable USB, PCMCIA
and PCI devices. Generally speaking it is a good idea to enable
hotplugging, but some systems may have problems with the probing
of the hotplug scripts.
</para>

<figure id="hotplug">
<title>Enabling hotplugging</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/hotplug.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The following steps are important, the next dialogs will assist
you with installing LILO, the &Kernel; bootloader. Unless you have
experience in configuring LILO it is a good idea to choose 
to use the <emphasis>simple</emphasis> option for configuration of LILO, 
which tries to configure LILO automatically (<xref linkend="liloinstall" />).
</para>

<figure id="liloinstall">
<title>Selecting the kind of LILO installation</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/lilo.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After selecting the <emphasis>simple</emphasis> option the LILO configuration 
utility will asks you whether you would like to use a framebuffer or not.
Using a framebuffer will allow you to use the console in several resolutions,
with other dimensions than the usual 80x25 characters. Some people who
use the console extensively prefer to use a framebuffer, which allows
them to keep more text on the screen. If you do not want a framebuffer
console, or if you are not sure, you can choose <emphasis>standard</emphasis>
here.
</para>

<figure id="framebuffer">
<title>Choosing the framebuffer resolution</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/framebuffer.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After setting the framebuffer you can pass extra parameters to the
kernel. This is normally not necessary, if you do not want to pass
extra parameters you can just press the &lt;Enter&gt; key.
</para>

<figure id="kernel-param">
<title>Adding kernel parameters</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/kernel-param.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The last step of the LILO configuration is selecting where LILO
should be installed. <emphasis>MBR</emphasis> is the master boot
record, the main boot record of PCs. Use this option if you want
use &Distribution; as only OS, or if you want to use LILO the boot
other operating systems. The <emphasis>Root</emphasis> option will
install LILO in the boot record of the &Distribution; <filename>/</filename>
partition. Use this option if you use another bootloader.
</para>

<figure id="lilo-dest">
<title>Choosing where LILO should be installed</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/lilo-dest.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
You will now be asked to configurere your mouse. Select the mouse type
from the dialog that appears. 
</para>

<figure id="mouse">
<title>Configuring a mouse</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/mouse.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
You will then be asked whether the 
<command>gpm</command> program should be loaded at boot time or not.
<command>gpm</command> is a daemon that allows you to cut and paste
text on the console.
</para>

<figure id="ask-load-gpm">
<title>Choosing whether GPM should be started or not</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/ask-load-gpm.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The next few steps will configure network connectivity. This is required
on almost every networked system. The &Distribution; setup will ask you
if you want to set up network connectivity. If you answer <quote>No</quote>
you can skip the next few network-related steps.
</para>

<figure id="ask-configure-network">
<title>Choosing whether you would like to configure network connectivity</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/ask-configure-network.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
You will now be asked to set the hostname. Please note that this is
not the fully qualified domain name (FQDN), just the part that represents
the host (normally the characters before the first dot in a FQDN).
</para>

<figure id="hostname">
<title>Setting the host name</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/hostname.png" format="PNG" scale="50"
 />
</imageobject>
</mediaobject>
</figure>

<para>
After setting the host name you can set the domain name part of the
fully qualified domain name (FQDN).
</para>

<figure id="domainname">
<title>Setting the domain name</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/domainname.png" format="PNG" scale="50"
 />
</imageobject>
</mediaobject>
</figure>

<para>
The rest of the network configuration depends on how the IP address is
set on the network the machine is connected to. Some networks have a
DHCP server that automatically assigns an IP address to hosts in the
network. If this is the case for the network the machine select
<emphasis>DHCP</emphasis> during this step of the installation. When
DHCP is selected you will only be asked whether a host name should
be sent to the server, normally you can leave this blank. If you use
DHCP you can skip the rest of the network configuration described below.
</para>

<para>
If the network does not have a DHCP server you can choose the
<emphasis>static IP</emphasis> option, which will allow you to
set the IP address and related settings manually.
</para>

<figure id="set-ipconfig-type">
<title>Manual or automatic IP address configuration</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/set-ipconfig-type.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The first step of the manual configuration is to set the IP address
of the first interface (eth0) of the machine.
</para>

<figure id="ipaddr">
<title>Setting the IP addres</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/ipaddr.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After setting the IP address you will be asked to enter the netmask.
The netmask is usually dependent on the IP address class.
</para>

<figure id="netmask">
<title>Setting the netmask</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/netmask.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
You will then be asked to set the address of the gateway. The gateway
is the machine on the network that provides access to other networks
by routing IP packets. If your network has no network you can just
hit the &lt;ENTER&gt; key.
</para>

<figure id="gateway">
<title>Setting the gateway</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/gateway.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The next dialog will ask you whether you want to use a nameserver or
not. A nameserver is a server that can provide the IP address for a
hostname. For example, if you surf to <emphasis>www.slackbasics.org</emphasis>,
the nameserver will <quote>convert</quote> the
<emphasis>www.slackbasics.org</emphasis> name to the corresponding IP
address.
</para>

<figure id="ask-nameserver">
<title>Choosing whether you want to use a nameserver or not</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/ask-nameserver.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
If you chose to use a nameserver, you will be given the opportunity
to set the IP address of the nameserver.
</para>

<figure id="nameserver">
<title>Setting the nameserver(s)</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/nameserver.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The final network settings screen provides an overview of the settings,
giving you the opportunity to correct settings that have errors.
</para>

<figure id="network-confirm">
<title>Confirming the network settings</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/network-confirm.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
After the network configuration you can set which services should be
started. You can mark/unmark services with the &lt;SPACE&gt; key.
</para>

<figure id="startup-services">
<title>Enabling/disabling startup services</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/startup-services.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<!-- try fonts? -->

<para>
Traditionally the system clock is set to the UTC timezone on UNIX(-like) 
systems. If this is the case, select <emphasis>Yes</emphasis>. If you also
use a non-UNIX(-like) OS on the same system, like Windows, it is usually
a good idea to choose <emphasis>No</emphasis>, because some PC operating
systems do not work with a separate system clock and software clock. 
</para>

<figure id="ask-clock-utc">
<title>Choosing whether the clock is set to UTC</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/ask-clock-utc.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
You will then be given the opportunity to select the time zone. This
is especially important on systems that have their system clock set
to UTC, without selecting the correct timezone the software clock will
not match the local time.
</para>

<figure id="timezone">
<title>Setting the timezone</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/timezone.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
If you installed the X Window System you can now set the default window
manager. The most basic functionality of a window manager is to provide
basic window managing functionality like title bars. But some options,
like KDE provide a complete desktop environment.
</para>

<figure id="defaultwm">
<title>Choosing the default window manager</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/defaultwm.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
The final step is to set the root password. The setup will ask you
whether you would like to set it or not. There is no reason not to
do this, and without a root password your system is dangerously
insecure.
</para>

<figure id="rootpasswd">
<title>Setting the root password</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/rootpasswd.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>

<para>
At this point you have completed the &Distribution; installation. You
can now reboot the system to start your fresh new &Distribution; system.
It was not that hard, was is? ;-)
</para>

<figure id="finished">
<title>Finished</title>
<mediaobject>
<imageobject>
<imagedata fileref="../images/finished.png" format="PNG" scale="50" />
</imageobject>
</mediaobject>
</figure>


</sect1>

</chapter>
